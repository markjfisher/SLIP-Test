digraph G {
  node [shape=record, style=filled, fillcolor=gray95]
  edge [color=gray50, fontcolor=gray50]

  Connection [label="{Connection|- is_connected_\l- devices_\l- device_index_\l- responses_\l- responses_mutex_\l- response_cv_\l| = send_data()\l= create_read_channel()\l= add_devices()\l= get_devices()\l= find_device()\l= is_connected()\l= set_is_connected()\l= wait_for_response()\l= wait_for_request()\l= get_unit_id_by_device_index()\l= to_string()\l}"]
  TCPConnection [label="{TCPConnection|- socket_\l| = send_data()\l= create_read_channel()\l= get_socket()\l= set_socket()\l= to_string()\l}"]
  Listener [label="{Listener|- ip_address_\l- port_\l- mtx_\l- connections_\l- is_listening_\l| = start()\l= stop()\l= create_listener_thread()\l= get_is_listening()\l= find_connection_with_device()\l= to_string()\l}"]
  TestApp [label="{TestApp|- listener_\l- responders_\l| = start_listener()\l= check_status()\l= connect_to_server()\l= info()\l= shutdown()\l}"]
  Requestor [label="{Requestor|- listener_\l| = send_request()\l}"]
  Packet [label="{Packet|| = serialize()\l}"]
  Request [label="{Request|- command_number_\l- sp_unit_\l| = serialize()\l= deserialize()\l= get_command_number()\l= set_command_number()\l= get_sp_unit()\l= set_sp_unit()\l= to_string()\l}"]
  StatusRequest [label="{StatusRequest|- status_code_\l| = serialize()\l= deserialize()\l= get_status_code()\l= set_status_code()\l= to_string()\l}"]
  Response [label="{Response|- status_\l| = serialize()\l= get_status()\l= set_status()\l}"]
  StatusResponse [label="{StatusResponse|- status_values_\l| = serialize()\l= get_status_values()\l= set_status_values()\l= add_status_value()\l}"]
  SmartPortHandler [label="{SmartPortHandler|| = status()\l}"]
  FakeSmartPortHandler [label="{FakeSmartPortHandler|| = status()\l}"]
  Responder [label="{Responder|- smart_port_handler_\l- connection_\l| = processRequestData()\l= wait_for_requests()\l}"]
  SPoSLIP [label="{SPoSLIP|- request_sequence_number_\l| = get_request_sequence_number()\l= set_request_sequence_number()\l}"]

  Connection -> TCPConnection [arrowhead=onormal]
  Packet -> Request [arrowhead=onormal]
  Packet -> Response [arrowhead=onormal]
  Request -> StatusRequest [arrowhead=onormal]
  Response -> StatusResponse [arrowhead=onormal]
  SmartPortHandler -> FakeSmartPortHandler [arrowhead=onormal]

  TestApp -> Listener [label="creates"]
  TestApp -> Responder [label="responds via"]
  TestApp -> Requestor [label="requests with"]
  Listener -> Connection [label="owns many"]
  Requestor -> Connection [label="uses"]
  Requestor -> StatusRequest [label="requests using"]
  Responder -> SmartPortHandler [label="handles requests with"]
  Responder -> StatusResponse [label="returns"]
  Responder -> Connection [label="uses"]
  SPoSLIP -> Packet [label="uses"]
}